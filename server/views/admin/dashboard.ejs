<!DOCTYPE html>
<html lang="en">
<%- include('../partials/head') %>
<body>
  <%- include('../partials/nav') %>

  <div class="container mt-5">
    <!-- Welcome Header -->
    <div class="row mb-4">
      <div class="col-12">
        <h1>ğŸ‘‹ Welcome, <%= username %>!</h1>
        <p class="text-muted">Manage your recipes from this dashboard</p>
      </div>
    </div>

    <!-- Stats Cards -->
    <div class="row mb-4">
      <div class="col-md-6">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">ğŸ“š Total Recipes</h5>
            <h2><%= recipeCount %></h2>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">âš¡ Quick Actions</h5>
            <div class="mt-3">
              <a href="/admin/recipes/new" class="btn btn-primary me-2">â• Create New Recipe</a>
              <a href="/recipes" class="btn btn-outline-secondary me-2">ğŸ‘€ View All Recipes</a>
              <a href="/admin" class="btn btn-outline-info">ğŸ”„ Refresh Dashboard</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Recent Recipes -->
    <% if (recipes && recipes.length > 0) { %>
    <div class="row">
      <div class="col-12">
        <div class="card">
          <div class="card-header">
            <h5>ğŸ“‹ Recent Recipes</h5>
          </div>
          <div class="card-body">
            <div class="table-responsive">
              <table class="table table-hover">
                <thead>
                  <tr>
                    <th>Recipe Name</th>
                    <th>Cook Time</th>
                    <th>Difficulty</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody>
                  <% recipes.forEach(recipe => { %>
                  <tr>
                    <td><strong><%= recipe.name %></strong></td>
                    <td><%= recipe.cook_time %> min</td>
                    <td>
                      <% if (recipe.difficulty === 'easy') { %>
                        <span class="badge bg-success">Easy</span>
                      <% } else if (recipe.difficulty === 'medium') { %>
                        <span class="badge bg-warning">Medium</span>
                      <% } else { %>
                        <span class="badge bg-danger">Hard</span>
                      <% } %>
                    </td>
                    <td>
                      <a href="/recipes/<%= encodeURIComponent(recipe.name) %>" class="btn btn-sm btn-outline-primary">ğŸ‘€ View</a>
                      <a href="/admin/recipes/edit/<%= encodeURIComponent(recipe.name) %>" class="btn btn-sm btn-outline-warning">âœï¸ Edit</a>
                    </td>
                  </tr>
                  <% }); %>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
    <% } else { %>
    <div class="row">
      <div class="col-12">
        <div class="card">
          <div class="card-body text-center">
            <h5>ğŸ½ï¸ No recipes yet!</h5>
            <p class="text-muted">Start building your recipe collection</p>
            <a href="/admin/recipes/new" class="btn btn-primary">â• Add Your First Recipe</a>
          </div>
        </div>
      </div>
    </div>
    <% } %>
  </div>

  <%- include('../partials/footer') %>
</body>
</html>
